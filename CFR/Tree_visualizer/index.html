<!DOCTYPE html>
<html>
  <head>
    <title>Poker tree</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <style>
			.node circle {
	  		fill: #fff;
	  		stroke: steelblue;
	  		stroke-width: 3px;
			}

			.node text { font: 20px sans-serif; font-weight: bold}

			.link {
	  		fill: none;
	  		stroke: #ccc;
	  		stroke-width: 8px;
			}
    </style>
  </head>
  <body>
    <script>
			var margin = {top: 40, right: 120, bottom: 20, left: 120},
			width = 10560 - margin.right - margin.left,
			height = 4200 - margin.top - margin.bottom;
	 
			var i = 0;

			var tree = d3.layout.tree()
    		.size([height, width - 180])

			var diagonal = d3.svg.diagonal()
				.projection(function(d) { return [d.x, d.y]; });

			var svg = d3.select("body").append("svg")
				.attr("width", width + margin.right + margin.left)
				.attr("height", height + margin.top + margin.bottom)
  			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

				// load the external data
				d3.json("data.json", function(error, treeData) {
				  root = treeData[0];
				  update(root);
				});

				function update(source) {
				
				  // Compute the new tree layout.
				  var nodes = tree.nodes(root).reverse(),
					  links = tree.links(nodes);
				
				  // Normalize for fixed-depth.
				  nodes.forEach(function(d) { d.y = d.depth * 120; });
				
				  // Declare the nodes…
				  var node = svg.selectAll("g.node")
					  .data(nodes, function(d) { return d.id || (d.id = ++i); });
				
				  // Enter the nodes.
				  var nodeEnter = node.enter().append("g")
					  .attr("class", "node")
					  .attr("transform", function(d) { 
						  return "translate(" + d.x + "," + d.y + ")"; });
				
				  nodeEnter.append("circle")
					  .attr("r", 6)
					  .style("fill", "#fff");
				
				  nodeEnter.append("text")
					  .attr("x", function(d) { 
						  return d.children || d._children ? -13 : 16; })
					  .attr("dy", ".35em")
					  .attr("text-anchor", function(d) { 
						  return d.children || d._children ? "end" : "start"; })
					  .text(function(d) { return d.name; })
					  .style("fill-opacity", 0.9);
				
				  // Declare the links…
				  var link = svg.selectAll("path.link")
					  .data(links, function(d) { return d.target.id; });
				
				  // Enter the links.
				  link.enter().insert("path", "g")
					  .attr("class", "link")
					  .attr("d", diagonal);
				
				}
    </script>
  </body>
</html>
